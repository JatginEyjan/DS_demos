# DS11 难度调试深度分析

## 一、扫雷基础难度参照系

### 1.1 经典扫雷难度参数
| 难度 | 网格 | 雷数 | 雷密度 | 安全格数 | 平均每雷安全格 |
|------|------|------|--------|----------|----------------|
| 初级 | 9×9=81 | 10 | 12.3% | 71 | 7.1 |
| 中级 | 16×16=256 | 40 | 15.6% | 216 | 5.4 |
| 高级 | 16×30=480 | 99 | 20.6% | 381 | 3.8 |

### 1.2 扫雷核心体验
- **确定性**：数字提供精确信息
- **风险可控**：玩家可以完全避免踩雷（通过推理）
- **错误惩罚**：踩雷=游戏结束
- **学习曲线**：从随机点击到逻辑推理

---

## 二、DS11当前难度分析

### 2.1 现有参数盘点
| 参数 | 当前值 | 分析 |
|------|--------|------|
| 初始火把 | 5 | 可揭示2-3格（普通2火，裂隙5火）|
| 火把上限 | 10 | 相对保守 |
| 雷率 | 20% | 略高于扫雷中级（15.6%）|
| 裂隙率 | 10%保底+随机 | 高成本高收益 |
| 火把获取率 | 30% | 平均每3.3格获得火把 |
| 核心出现 | 10格后15% | 随机性较大 |
| 迷雾上限 | 15格 | 硬限制 |

### 2.2 当前体验问题识别
```
问题1：火把消耗与获取不平衡
- 揭示1格消耗2火把
- 平均每3.3格获得1-3火把（期望1.5火把）
- 净消耗：2 - 0.45 = 1.55火把/格
- 5火把只能揭示约3格，非常紧张

问题2：雷率20%过高
- 扫雷中级才15.6%
- 20%意味着每5格有1雷
- 结合F3惩罚，风险过高

问题3：核心出现概率依赖运气
- 15%概率可能导致长时间找不到核心
- 玩家可能在找到核心前火把耗尽

问题4：15格上限与核心机制冲突
- 核心10格后出现，只有5格机会
- 15%×5=75%概率在15格内找到核心
- 25%概率游戏无法胜利
```

---

## 三、难度维度拆解

### 3.1 资源管理难度
```
当前公式：
火把净消耗 = 揭示成本 - 获取期望
= 2 - (0.3 × 2) = 1.4火把/格

5火把可行动次数 = 5/1.4 ≈ 3.5次
加上火把堆补充，实际约4-5次
```

**调试空间**：
- 降低普通格成本：2→1（增加可行动次数）
- 提高火把获取率：30%→40%或50%
- 增加初始火把：5→6或7
- 提高火把上限：10→12或15

### 3.2 信息获取难度（雷率）
```
当前雷率：20%（雷:安全 = 1:4）
扫雷中级：15.6%（雷:安全 = 1:5.4）
```

**调试空间**：
- 简单模式：15%（接近扫雷中级）
- 标准模式：20%（当前）
- 困难模式：25%（高密度风险）

### 3.3 胜利条件难度
```
当前机制：
- 核心10格后出现，15%概率
- 15格迷雾上限
- 可行动次数：4-5次
- 找到核心概率：1 - (0.85^5) ≈ 56%
```

**调试空间**：
- 核心保底机制（15格必出）
- 提高核心概率：15%→20%或25%
- 放宽迷雾上限：15→18或20

### 3.4 畸变系统难度调节
```
当前畸变：
- 正向：深渊之眼、资源嗅觉
- 负向：沉重步伐、强迫症
- 彩蛋：低语理解

畸变出现时机：3印记触发
```

**调试空间**：
- 印记获取难度（踩雷概率）
- 畸变选择数量（当前3选1）
- 畸变效果强度调节

---

## 四、难度等级设计方案

### 4.1 简单模式（新手友好）
```yaml
初始火把: 7
火把上限: 12
普通格成本: 1
裂隙成本: 4
火把获取率: 45%
雷率: 15%
核心出现: 8格后，25%概率
迷雾上限: 18
裂隙保底: 每4格
```
**预期体验**：容错率高，策略空间大，适合学习机制

### 4.2 标准模式（当前调整版）
```yaml
初始火把: 6
火把上限: 12
普通格成本: 2
裂隙成本: 5
火把获取率: 35%
雷率: 18%
核心出现: 10格后，20%概率，18格保底
迷雾上限: 18
裂隙保底: 每5格
```
**预期体验**：平衡挑战，需要规划，失误有代价但可接受

### 4.3 困难模式（硬核挑战）
```yaml
初始火把: 5
火把上限: 10
普通格成本: 2
裂隙成本: 5
火把获取率: 25%
雷率: 22%
核心出现: 12格后，15%概率，无保底
迷雾上限: 15
裂隙保底: 每6格
F3惩罚增强: 污染100%触发
```
**预期体验**：高风险高回报，每一步都关键，需要精通机制

---

## 五、F3+F4系统难度调节

### 5.1 F3（踩雷惩罚）强度分级
```
轻度：
- 强制揭示2格（非3格）
- 污染概率降低（模糊30%/沉重30%/不稳定10%）
- 印记获得：1个
- 火把奖励：40%

标准（当前）：
- 强制揭示3格
- 污染概率（40%/40%/20%）
- 印记获得：1个
- 火把奖励：30%

重度：
- 强制揭示4格
- 污染概率（50%/40%/30%）- 可能双重污染
- 印记获得：1-2个随机
- 火把奖励：20%
```

### 5.2 F4（畸变）触发难度
```
轻度：印记上限5个
标准：印记上限3个（当前）
重度：印记上限2个
```

### 5.3 畸变效果强度
```
深渊之眼（透视）：
- 轻度：每2回合1次
- 标准：每回合1次
- 重度：仅首次

资源嗅觉：
- 轻度：+30%火把概率
- 标准：+20%
- 重度：+10%

沉重步伐：
- 轻度：+0火把（无惩罚）
- 标准：+1火把
- 重度：+1火把且上限-2
```

---

## 六、关键参数推荐值

### 6.1 立即调整的参数（当前版本优化）
| 参数 | 当前 | 推荐 | 理由 |
|------|------|------|------|
| 初始火把 | 5 | 6 | 增加开局容错 |
| 火把上限 | 10 | 12 | 允许更多策略选择 |
| 火把获取率 | 30% | 35% | 略微缓解资源紧张 |
| 核心概率 | 15% | 20% | 提高胜利可达性 |
| 核心保底 | 无 | 18格 | 避免死局 |
| 迷雾上限 | 15 | 18 | 增加策略深度 |

### 6.2 需要实现的难度选择器
```javascript
const DIFFICULTY = {
  easy: {
    initialTorch: 7, maxTorch: 12, fogCost: 1,
    riftCost: 4, torchChance: 0.45, mineRate: 0.15,
    coreAfter: 8, coreChance: 0.25, maxCells: 18
  },
  normal: {
    initialTorch: 6, maxTorch: 12, fogCost: 2,
    riftCost: 5, torchChance: 0.35, mineRate: 0.18,
    coreAfter: 10, coreChance: 0.20, maxCells: 18, coreGuarantee: 18
  },
  hard: {
    initialTorch: 5, maxTorch: 10, fogCost: 2,
    riftCost: 5, torchChance: 0.25, mineRate: 0.22,
    coreAfter: 12, coreChance: 0.15, maxCells: 15, coreGuarantee: null
  }
};
```

---

## 七、难度验证指标

### 7.1 胜率目标
```
简单模式：目标胜率 60-70%
标准模式：目标胜率 40-50%
困难模式：目标胜率 20-30%
```

### 7.2 平均回合数
```
简单模式：8-12回合（揭示+撤退）
标准模式：6-10回合
困难模式：4-8回合
```

### 7.3 核心体验检查
```
□ 玩家是否感到资源紧张但可控？
□ 踩雷是否带来"带毒的礼物"体验（信息+代价）？
□ 畸变是否带来有趣的策略变化？
□ 撤退决策是否有张力（贪婪vs保守）？
□ 胜利是否有成就感？
```

---

## 八、实施建议

### 8.1 第一阶段：基础参数调整（Day 6）
1. 应用推荐参数调整
2. 添加难度选择界面
3. 实现核心保底机制

### 8.2 第二阶段：数据埋点（Day 7）
1. 记录玩家行为数据
2. 统计胜率、平均回合数
3. 分析玩家退出点

### 8.3 第三阶段：迭代优化（Day 8+）
1. 根据数据调整参数
2. 细化畸变效果
3. 优化新手指引

---

## 附录：扫雷vs DS11难度对比表

| 维度 | 扫雷中级 | DS11当前 | DS11推荐（标准） |
|------|----------|----------|------------------|
| 雷密度 | 15.6% | 20% | 18% |
| 信息精度 | 精确数字 | 数字+模糊（污染） | 数字+污染可控 |
| 错误惩罚 | 游戏结束 | F3强制揭示+污染 | F3可控代价 |
| 资源限制 | 无 | 火把限制 | 火把较宽松 |
| 可预测性 | 高 | 中 | 中 |
| 策略深度 | 推理 | 资源管理+风险 | 资源+风险+畸变 |

---

*分析完成时间：2026-02-21*
*版本：DS11 v1.0 MVP*
