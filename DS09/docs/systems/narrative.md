# 叙事系统

> 深渊不只是地图上的格子，更是留在你眼中的痕迹。

---

## 设计意图

### 解决什么问题？
- **纯机制游戏缺少沉浸感**：扫雷只有数字，没有情感记忆
- **恐怖游戏依赖jump scare**：需要氛围营造而非惊吓
- **Roguelike重复体验枯燥**：每次探索应该有不同故事

### 创造什么体验？
- **调查员视角**：你不是英雄，只是试图理解不可理解之物的普通人
- **碎片化发现**：故事不是线性的，而是通过探索拼凑
- **代价感**：即使成功，你也已经被改变了

### 支撑什么情感？
- **好奇**：👁️提示的若隐若现
- **不安**：剧情房的文本暗示
- **恐惧**：行动前/后的反差
- **无力**：即使逃离，深渊已经留下痕迹

---

## 核心机制

### 剧情房结构

每个剧情房包含：

```
{
  id: 'shadow_l1_main_1',
  title: '主线·地窖入口',
  text: '行动前剧情文本...',
  goodOutcome: {
    preText: '行动后剧情（成功）...',
    resultText: '结果描述',
    reward: '理智+10，获得煤油灯',
    sanity: 10,
    item: {...}
  },
  badOutcome: {
    preText: '行动后剧情（失败）...',
    resultText: '结果描述',
    reward: '理智-15',
    sanity: -15
  }
}
```

**为什么分preText和resultText？**
- preText：描述行动过程，营造氛围
- resultText：简洁明了的结果
- 让玩家体验"选择→过程→后果"的完整链条

### 叙事层次

#### 第一层：环境叙事（已实现）
- **威胁底色**：🟡🔴本身就在叙事（"不安""危险"）
- **👁️注视提示**：被注视的感觉
- **幻觉扭曲**：界面变化暗示精神不稳定

#### 第二层：剧情房叙事（已实现）
- **行动前文本**：设置场景，营造氛围
- **骰子判定**：玩家参与叙事（d100决定走向）
- **行动后文本**：根据结果分支

#### 第三层：道具叙事（部分实现）
- 道具描述带出血肉模糊的线索
- 例：「古老钥匙」描述中暗示蛇人文明

#### 第四层：跨层叙事（缺口）
- **当前缺失**：每层剧情房独立，缺少连贯线索
- **期望**：5层剧情房连成完整故事线

#### 第五层：结局叙事（缺口）
- **当前缺失**：撤离后只是数值结算
- **期望**："调查员笔记"描述精神创伤

---

## 关键设计

### 1. 行动前/后叙事结构

**行动前（设定场景）：**
```
推开老宅沉重的木门，穿过积灰的走廊来到地窖，
潮湿的霉味混杂着泥土气息扑面而来。
墙角的砖墙被破开一个可供人通行的大洞...
```

**行动后-成功（好的体验）：**
```
你握紧手电筒，小心翼翼地向隧道深处探索...
突然，你的脚踢到一个金属物体——那是一盏老式的煤油灯。
```

**行动后-失败（恐惧体验）：**
```
你刚踏入隧道几步，黑暗中突然有什么冰凉的东西擦过你的肩膀。
你猛地转身...却什么也没看到。但那刺骨的寒意真实存在...
```

**设计意图：**
- 成功 = 探索和发现（正面但仍有不安）
- 失败 = 不可名状的恐惧（未知、触碰、消失）

### 2. 骰子判定与叙事的结合

**判定过程本身也是叙事：**
```
🎲 d100: 45 / 35 — ✨ 成功

你感到一种莫名的信心...
（preText展开）
```

```
🎲 d100: 87 / 35 — 💀 失败

你的直觉在尖叫，但已经太晚了...
（preText展开）
```

**缺口：** 骰子判定目前只有结果，缺少"判定过程"的叙事包装

### 3. 幻觉叙事（重大缺口）

**当前状态：**
- 幻觉只有视觉扭曲（底色错误）
- 缺少专属的剧情文本

**期望：**
```
【幻觉模式触发】

理智 < 30

你看到的底色开始扭曲...
安全区域在你眼中变成危险红色
而你确信是陷阱的地方，却显示为安全绿色

👁️ 注视提示在你视野边缘闪烁
但你转头时，那里什么都没有

（专属幻觉剧情房？）
你看到了一个不存在于地图上的房间
门牌上写着你的名字...
```

**设计机会：**
- 幻觉时是否可以触发"平行世界"剧情？
- 正常世界和幻觉世界的剧情文本不同？
- 玩家如何分辨哪个是真实？

---

## 叙事缺口（详细）

### 🔴 高优先级

#### 缺口1：跨层叙事连贯性
**问题：** 每层剧情房独立，5层后没有完整故事感

**可能方案：**
- **主线贯穿**：第1层的剧情埋下伏笔，第5层回收
- **道具串联**：每层获得的关键道具在结局串联
- **环境变化**：深层地牢的环境描述暗示"越来越接近真相"

**具体设计：**
```
第1层：发现日记残页（"我听到了...他们在呼唤我"）
第3层：发现完整日记（"我终于明白了，那不是呼唤，是警告"）
第5层：发现日记主人的遗骸（手中紧握着逃离的地图）
```

#### 缺口2：结局的代价叙事
**问题：** 撤离后只有数值结算，缺少情感冲击

**可能方案：**
- **调查员笔记**：结局后显示主角的笔记，描述精神创伤
- **多重结局文本**：根据理智值、探索度、收集品显示不同结局
- **"你已经被改变"**：即使成功，也暗示主角不再是原来的自己

**示例：**
```
【安全撤离】

你走出了地窖，阳光刺眼。
但你发现，你的影子...移动得比你自己慢了一拍。

【理智<30撤离】

你走出了地窖，但你知道，有些东西跟着你出来了。
现在，当你看向镜子时，你会看到隧道深处的黑暗。

【完美结局（理智>80）】

你不仅逃出了深渊，还保持着清醒。
但你知道，深渊也在看着你。
它记住了你的脸。
```

#### 缺口3：幻觉专属叙事
**问题：** 幻觉只有视觉效果，没有叙事支撑

**可能方案：**
- **幻觉剧情房**：理智<30时，地图中随机出现"幻觉剧情房"
- **平行文本**：同一个剧情房，正常状态和幻觉状态文本不同
- **逐渐疯狂**：理智越低，剧情文本越扭曲、越个人化

### 🟡 中优先级

#### 缺口4：剧情房吸引力不足
**问题：** 👁️提示单一，玩家可能错过重要剧情

**可能方案：**
- **三级提示**：👁️（普通剧情）→ ✨（重要剧情）→ 🔮（关键剧情）
- **诱惑增强**：重要剧情房的奖励更丰厚，叙事更诱人
- **错过惩罚**：某些剧情房提供关键线索，错过会影响结局

#### 缺口5：道具叙事深度
**问题：** 道具描述目前较浅，缺少血肉

**可能方案：**
- **道具故事**：每个道具都有获得场景的描述
- **道具关联**：道具之间可以组合，触发新叙事
- **道具代价**：某些强力道具有叙事代价（如"这把枪曾属于一个疯了的人"）

### 🟢 低优先级

#### 缺口6：环境叙事多样性
**问题：** 威胁底色和👁️提示单一，缺少变化

**可能方案：**
- **动态环境**：同一格子，不同理智值看到不同描述
- **玩家行为影响**：剧情选择影响环境描述（如"自从你读了那本日记，墙壁上的符文开始发光"）

---

## 与其他系统的关联

### × 威胁感知系统
- 👁️提示是叙事的入口（视觉诱惑→文本展开）
- 幻觉扭曲既是机制也是叙事（"你看到了不存在的东西"）

### × 撤离系统
- 撤离后的叙事描述（代价感）
- 超额探索是否触发特殊剧情？（"你在深渊中走得太远了"）

### × 理智系统
- 理智值影响叙事文本（低理智时文本更扭曲、更个人化）
- 理智崩溃时的特殊结局叙事

---

## 叙事文案风格指南

### 克苏鲁氛围要点
1. **不可名状**：不说"怪物"，说"那个东西""无法描述的存在"
2. **身体感知**：强调触觉、嗅觉、听觉，而非视觉
3. **个人化**：用"你"，让玩家代入
4. **留白**：不说完，让玩家想象

### 示例对比

❌ 不好的叙事：
```
你发现了一个怪物，它有8只眼睛。
你感到害怕，失去了10点理智。
```

✅ 好的叙事：
```
你感觉到有什么东西在注视你。
不是一双眼，是很多双眼，同时从各个方向。
你数了数...但你数不清楚，因为当你看向它们时，它们在移动。
你的理智在拒绝理解你看到的东西。
```

---

## 待办清单

### 立即可以做
- [ ] 为现有剧情房编写幻觉状态文本（平行文本）
- [ ] 设计结局的"调查员笔记"模板
- [ ] 为关键道具编写深度描述

### 需要设计
- [ ] 跨层叙事线索设计（5层如何连成故事）
- [ ] 幻觉专属剧情房设计
- [ ] 三级👁️提示系统（👁️✨🔮）

### 长期规划
- [ ] 多结局分支设计
- [ ] 环境叙事动态变化
- [ ] 玩家行为对叙事的长期影响

---

*最后更新：2026-02-14*  
*状态：基础框架完成，深度叙事和跨层连贯性待完善*