<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>DS10 - æ·±æ¸Šç¼–å¹´å² v10</title>
    <style>
        body { background: #0a0a0f; color: #e0e0e0; font-family: monospace; margin: 0; padding: 20px; }
        .hidden { display: none !important; }
        .screen { max-width: 600px; margin: 0 auto; }
        h1 { color: #e94560; text-align: center; }
        .btn { 
            display: block; 
            width: 100%; 
            padding: 20px; 
            margin: 10px 0; 
            background: #1a1a2e; 
            border: 2px solid #3a3a4a; 
            color: #e0e0e0; 
            font-size: 16px; 
            cursor: pointer;
            text-align: left;
        }
        .btn:hover { border-color: #e94560; }
        .hint { color: #666; text-align: center; margin-top: 20px; }
        .status { 
            background: #1a1a2e; 
            padding: 10px; 
            margin-bottom: 10px; 
            display: flex; 
            justify-content: space-between; 
        }
        .room-title { color: #e94560; font-size: 18px; margin-bottom: 10px; }
        .room-desc { color: #ccc; line-height: 1.6; margin-bottom: 20px; }
    </style>
</head>
<body>
    <!-- èŒä¸šé€‰æ‹© -->
    <div id="selectScreen" class="screen">
        <h1>DS10 - æ·±æ¸Šç¼–å¹´å²</h1>
        <p style="text-align:center;color:#666;">é€‰æ‹©2åè°ƒæŸ¥å‘˜</p>
        <button class="btn" id="btn1" ontouchstart="sel('archaeologist')" onclick="sel('archaeologist')">
            ğŸ” è€ƒå¤å­¦å®¶<br><small style="color:#888;">HP:70 | ä¾¦æŸ¥50 åŠ›é‡30</small>
        </button>
        <button class="btn" id="btn2" ontouchstart="sel('soldier')" onclick="sel('soldier')">
            âš”ï¸ å‰å†›äºº<br><small style="color:#888;">HP:90 | ä¾¦æŸ¥35 åŠ›é‡55</small>
        </button>
        <button class="btn" id="btn3" ontouchstart="sel('occultist')" onclick="sel('occultist')">
            âœ¦ ç¥ç§˜å­¦è€…<br><small style="color:#888;">HP:50 | ä¾¦æŸ¥40 åŠ›é‡20</small>
        </button>
        <div class="hint" id="hint">å·²é€‰æ‹©: 0/2</div>
        <div id="test" style="color:#27ae60;text-align:center;margin-top:10px;font-size:11px;">å¦‚æœçœ‹åˆ°è¿™æ¡æ–‡å­—ï¼Œè¯·åˆ·æ–°é¡µé¢...</div>
        <script>document.getElementById('test').textContent='âœ“ JSè¿è¡Œæ­£å¸¸ï¼Œç­‰å¾…ç‚¹å‡»';</script>
    </div>

    <!-- æ¸¸æˆç”»é¢ -->
    <div id="gameScreen" class="screen hidden">
        <div class="status">
            <span id="p1">è°ƒæŸ¥å‘˜A: 70/70</span>
            <span id="p2">è°ƒæŸ¥å‘˜B: 70/70</span>
        </div>
        <div class="room-title" id="rname">æˆ¿é—´</div>
        <div class="room-desc" id="rdesc">æè¿°</div>
        <div id="choices"></div>
    </div>

    <!-- ç»“å±€ -->
    <div id="endScreen" class="screen hidden">
        <h1 id="endTitle">ç»“å±€</h1>
        <p id="endText">æè¿°</p>
        <button class="btn" onclick="location.reload()">å†ç©ä¸€æ¬¡</button>
    </div>

<script>
// é¡µé¢åŠ è½½æµ‹è¯•
document.addEventListener('DOMContentLoaded', function() {
    var test = document.getElementById('test');
    if (test) test.textContent = 'âœ“ é¡µé¢åŠ è½½å®Œæˆï¼Œè¯·ç‚¹å‡»èŒä¸šæŒ‰é’®';
});

// å…¨å±€å˜é‡
var selProfs = [];
var team = [];
var roomIdx = 0;

// èŒä¸šæ•°æ®
var profs = {
    archaeologist: { name: 'è€ƒå¤å­¦å®¶', hp: 70 },
    soldier: { name: 'å‰å†›äºº', hp: 90 },
    occultist: { name: 'ç¥ç§˜å­¦è€…', hp: 50 }
};

// 11ä¸ªæˆ¿é—´
var rooms = [
    { name: 'çŸ¿å‘å…¥å£', desc: 'å¯’é£è£¹æŒŸç€è…æœ½çš„æ°”æ¯ã€‚ä½œä¸ºDIAç¬¬9å°é˜Ÿï¼Œä½ ä»¬çš„ä»»åŠ¡æ˜¯æ‰¾åˆ°å¤±è¸ªçš„ç¬¬7å°é˜Ÿå¹¶é˜»æ­¢æŸç§"ä»ªå¼"ã€‚', choices: [{ t: 'è¿›å…¥çŸ¿å‘', n: 1 }] },
    { name: 'å¡Œé™·é€šé“', desc: 'é€šé“è¢«ç¢çŸ³å µå¡ï¼Œå¢™ä¸Šæœ‰æ–°é²œçš„åˆ»ç—•ç¬¦å·ã€‚', choices: [{ t: 'å¼ºè¡Œé€šè¿‡', n: 2 }, { t: 'å¯»æ‰¾å…¶ä»–è·¯å¾„', n: 2 }] },
    { name: 'è£…å¤‡å®¤', desc: 'ç¬¬7å°é˜Ÿç•™ä¸‹çš„è¡¥ç»™ç‚¹ã€‚ä¾¿æ¡å†™ç€ï¼š"ä¸»æ•™å·²ç»ä¸æ˜¯äººäº†ã€‚â€”â€”é©¬åº“æ–¯"', choices: [{ t: 'ç»§ç»­å‰è¿›', n: 3 }] },
    { name: 'å£ç”»å…', desc: 'å¤è€å£ç”»æç»˜ç€ä»ªå¼åœºæ™¯ï¼Œäººä»¬åœ¨é»‘è‰²è£‚éš™å‰çŒ®ç¥­ã€‚', choices: [{ t: 'ç ”ç©¶å£ç”»', n: 4 }, { t: 'å¿«é€Ÿç¦»å¼€', n: 4 }] },
    { name: 'ç¬¬7å°é˜Ÿè¥åœ°', desc: 'é©¬åº“æ–¯çš„æ—¥è®°ï¼š"åŸƒå¾·è’™Â·å¸ƒè±å…‹ä¼å¾·ä¸»æ•™è¯´æ·±æ¸Šæ˜¯å±éšœï¼Œä¸æ˜¯å¨èƒã€‚æˆ‘ä»¬å¿…é¡»é˜»æ­¢ä»–ã€‚"', choices: [{ t: 'ç»§ç»­è¿½èµ¶', n: 5 }] },
    { name: 'ä½è¯­å›å»Š', desc: 'å¬åˆ°äº†æ— æ³•ç†è§£çš„ä½è¯­å£°ï¼Œåƒæ˜¯æœ‰ä¸œè¥¿åœ¨è¯±å¯¼ä½ ä»¬...', choices: [{ t: 'å¿«é€Ÿé€šè¿‡', n: 6 }] },
    { name: 'çŸ¿é“åˆ†å‰', desc: 'å·¦è¾¹é€šå‘ä»ªå¼åŒºï¼Œå³è¾¹é€šå‘æ·±æ¸Šè¾¹ç¼˜ã€‚', choices: [{ t: 'â¬†ï¸ æ•™å¯¼å…', n: 7 }, { t: 'â¬‡ï¸ æ·±æ¸Šè¾¹ç¼˜', n: 8 }] },
    { name: 'æ•™å¯¼å…', desc: 'åŸƒå¾·è’™çš„ç¬”è®°ï¼šä»ªå¼æ˜¯æ‹¯æ•‘äººç±»çš„å”¯ä¸€æ–¹æ³•ã€‚', choices: [{ t: 'å‰å¾€è—ä¹¦å®¤', n: 9 }] },
    { name: 'æ·±æ¸Šè¾¹ç¼˜', desc: 'é©¬åº“æ–¯é—è¨€ï¼š"åŸƒå¾·è’™æƒ³æ›¿æ¢ä»–çš„å¦»å­è‰¾ç³å¨œ...å¥¹è¢«å›°åœ¨æ·±æ¸Šè¾¹ç¼˜å½“å®ˆé—¨äºº..."', choices: [{ t: 'å‰å¾€å†³æˆ˜', n: 9 }] },
    { name: 'è—ä¹¦å®¤', desc: 'è‰¾ç³å¨œçš„ç…§ç‰‡ï¼Œ2å¹´å‰è¢«è®¤ä¸ºæ­»äº¡ã€‚åŸƒå¾·è’™æƒ³æ•‘å¥¹ã€‚', choices: [{ t: 'âš”ï¸ è¿æˆ˜å®ˆå«', n: 10 }] },
    { name: 'ä»ªå¼å¤§å…', desc: 'åŸƒå¾·è’™ç«™åœ¨èƒ½é‡æŸ±ä¸­ï¼š"ä½ ä»¬æ¥äº†...æˆ‘ç­‰å¾…ç€æœ‰äººèƒ½ç†è§£æˆ‘...æˆ–è€…é˜»æ­¢æˆ‘ã€‚"', choices: [{ t: 'ğŸ’¬ è¯´æœ', e: 'çœŸç›¸' }, { t: 'âš”ï¸ æˆ˜æ–—', e: 'è‹±é›„' }, { t: 'âœ¨ ç‰ºç‰²', e: 'ç‰ºç‰²' }] }
];

// é€‰æ‹©èŒä¸š
function sel(key) {
    if (selProfs.indexOf(key) >= 0) return;
    if (selProfs.length >= 2) return;
    
    selProfs.push(key);
    document.getElementById('hint').textContent = 'å·²é€‰æ‹©: ' + selProfs.length + '/2';
    document.getElementById('hint').style.color = '#27ae60';
    
    // é«˜äº®
    var btnId = key === 'archaeologist' ? 'btn1' : key === 'soldier' ? 'btn2' : 'btn3';
    document.getElementById(btnId).style.borderColor = '#27ae60';
    document.getElementById(btnId).style.background = '#1a3a2e';
    
    if (selProfs.length === 2) {
        setTimeout(start, 300);
    }
}

// å¼€å§‹æ¸¸æˆ
function start() {
    team = [
        { name: profs[selProfs[0]].name, hp: profs[selProfs[0]].hp, max: profs[selProfs[0]].hp },
        { name: profs[selProfs[1]].name, hp: profs[selProfs[1]].hp, max: profs[selProfs[1]].hp }
    ];
    
    document.getElementById('selectScreen').classList.add('hidden');
    document.getElementById('gameScreen').classList.remove('hidden');
    
    updateStatus();
    showRoom(0);
}

// æ˜¾ç¤ºæˆ¿é—´
function showRoom(idx) {
    roomIdx = idx;
    var r = rooms[idx];
    
    document.getElementById('rname').textContent = r.name + ' (' + (idx+1) + '/11)';
    document.getElementById('rdesc').textContent = r.desc;
    
    var html = '';
    for (var i = 0; i < r.choices.length; i++) {
        var c = r.choices[i];
        if (c.n !== undefined) {
            html += '<button class="btn" onclick="showRoom(' + c.n + ')">' + c.t + '</button>';
        } else if (c.e) {
            html += '<button class="btn" onclick="end(' + \'' + c.e + '\'\)">' + c.t + '</button>';
        }
    }
    document.getElementById('choices').innerHTML = html;
}

// æ›´æ–°çŠ¶æ€
function updateStatus() {
    document.getElementById('p1').textContent = team[0].name + ': ' + team[0].hp + '/' + team[0].max;
    document.getElementById('p2').textContent = team[1].name + ': ' + team[1].hp + '/' + team[1].max;
}

// ç»“å±€
function end(type) {
    var titles = { truth: 'ğŸ“š çœŸç›¸ç»“å±€', hero: 'ğŸ† è‹±é›„ç»“å±€', sacrifice: 'ğŸ˜¢ ç‰ºç‰²ç»“å±€' };
    var descs = { 
        truth: 'ä½ è¯´æœäº†åŸƒå¾·è’™ï¼Œæ‰¾åˆ°äº†è®©æ·±æ¸Šæ²‰ç¡çš„æ–¹æ³•ã€‚', 
        hero: 'ä½ ä»¬å‡»è´¥äº†åŸƒå¾·è’™ï¼Œé˜»æ­¢äº†ä»ªå¼ï¼', 
        sacrifice: 'ä¸€åè°ƒæŸ¥å‘˜æ›¿ä»£è‰¾ç³å¨œæˆä¸ºå®ˆé—¨äººã€‚' 
    };
    
    document.getElementById('gameScreen').classList.add('hidden');
    document.getElementById('endScreen').classList.remove('hidden');
    document.getElementById('endTitle').textContent = titles[type];
    document.getElementById('endText').textContent = descs[type];
}
</script>
</body>
</html>
